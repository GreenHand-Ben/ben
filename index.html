<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <link rel="stylesheet" href="css/amazeui.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-status="index">
    <audio id="bg_music" autoplay="autoplay" loop="loop" src="./sound/menu_music.mp3" preload="auto"></audio>
    <audio id="btn_music" src="./sound/button.mp3" preload="auto"></audio>
    <audio id="biu_music" src="./sound/biubiubiu.mp3" preload="auto"></audio>
    <audio id="boom_music" src="./sound/boom.mp3" preload="auto"></audio>
    <audio id="die_music" src="./sound/die.mp3" preload="auto"></audio>
    <canvas id="game"></canvas>
    <div class="ui-index">
        <h1>飞机大作战</h1>
        <div class="btn-group">
            <button class="js-start btn">开始游戏</button>
            <button class="js-setting btn">游戏设置</button>
            <button class="js-rule btn">游戏说明</button>
        </div>
    </div>
    <div class="ui-rule ui-panel">
        <h2>游戏说明</h2>
        <p>通过手指移动飞机，躲避敌人，通过子弹射击敌人得分，游戏无限时。消灭小型飞机得分100分，消灭大型飞机得分1000分。</p>
        <button class="js-confirm-rule">我知道了</button>
    </div>
    <div class="ui-setting ui-panel">
        <h2>游戏设置</h2>
        <ul class="setting-group">
            <li class="setting">
                <span>音乐设置</span>
                <select data-am-selected="{btnStyle: 'primary'}" id="music" onchange="set_music()">
                    <option value="0" selected>开启音乐</option>
                    <option value="1">关闭音乐</option>
                </select>
            </li>
            <li class="setting">
                <span>背景设置</span>
                <select data-am-selected="{btnStyle: 'primary'}" id="background" onchange="set_bg()">
                    <option value="bg1" selected>夜色战场</option>
                    <option value="bg2">天上宫阙</option>
                    <option value="bg3">原始森林</option>
                    <option value="bg4">火山战场</option>
                </select>
            </li>
            <li class="setting">
                <span>战机设置</span>
                <select data-am-selected="{btnStyle: 'primary'}" id="plane" onchange="click_btn()">
                    <option value="0" selected>蓝色战机</option>
                    <option value="1">粉色战机</option>
                </select>
            </li>
        </ul>
        <button class="js-confirm-setting">确认设置</button>
    </div>
    <div class="ui-over ui-panel">
        <h2>游戏结束</h2>
        <p id="score"></p>
        <button class="js-confirm-rule">返回大厅</button>
        <button class="js-start btn">重新开始</button>
    </div>
    <!-- 页面js -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/resource.js"></script>
    <script src="js/element.js"></script>
    <script src="js/bullet.js"></script>
    <script src="js/enemy.js"></script>
    <script src="js/plane.js"></script>
    <script src="js/amazeui.min.js"></script>
    <script src="js/app.js"></script>
    <script>
        // var audio = document.createElement("audio");
        // audio.id = "btn_music";
        // audio.src = "./sound/button.mp3";
        // audio.addEventListener("canplaythrough",function(){},false);
        document.addEventListener('plusready', function(a) {
            var first = null;
            plus.key.addEventListener('backbutton', function() {
                //首次按键，提示‘再按一次退出应用’
                if (!first) {
                    first = new Date().getTime();
                    console.log('再按一次退出应用');//用自定义toast提示最好
                    setTimeout(function() {
                        first = null;
                    }, 1000);
                } 
                else {
                    if (new Date().getTime() - first < 1000) {
                        plus.runtime.quit();
                    }
                }
            }, false);
        });
    </script>
</body>
</html>